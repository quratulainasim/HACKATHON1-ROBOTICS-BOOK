# Physical AI Robotics Authentication Server

This is a TypeScript-based authentication server using Better Auth and Neon PostgreSQL for the Physical AI Robotics Book project.

## Setup

1. Install dependencies:
   ```bash
   npm install
   ```

2. Copy the example environment file:
   ```bash
   cp .env.example .env
   ```

3. Update the `.env` file with your actual credentials:
   - `DATABASE_URL`: Your Neon PostgreSQL connection string
   - `AUTH_SECRET`: A secure secret key for Better Auth (at least 32 characters)
   - Update other values as needed for your environment

## Scripts

- `npm run build`: Compiles TypeScript files to JavaScript
- `npm run dev`: Starts the development server with hot reloading
- `npm start`: Starts the production server
- `npm run migrate`: Runs database migrations
- `npm run dev:watch`: Watches for TypeScript file changes and compiles automatically
- `npm test`: Runs tests

## Project Structure

```
auth-server/
├── src/                 # TypeScript source files
│   ├── index.ts        # Main application entry point
│   ├── migrate.ts      # Database migration script
│   └── types/          # Type definitions
├── dist/               # Compiled JavaScript files (generated by build)
├── package.json        # Project dependencies and scripts
├── tsconfig.json       # TypeScript configuration
└── .env.example        # Environment variable examples
```

## Environment Variables

- `PORT`: Port number for the server (default: 3001)
- `HOST`: Host for the server (default: localhost)
- `FRONTEND_URL`: URL of the frontend application for CORS
- `AUTH_BASE_URL`: Base URL for the auth server
- `AUTH_SECRET`: Secret key for signing JWT tokens
- `DATABASE_URL`: PostgreSQL connection string for Neon

## Database Migrations

Run the following command to create the required database tables:

```bash
npm run migrate
```

This will create the following tables:
- `users`: User account information
- `sessions`: Session management
- `password_reset_tokens`: Password reset tokens